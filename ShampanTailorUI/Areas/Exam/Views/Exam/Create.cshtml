@model List<ShampanExam.Models.Exam.QuestionVM>

@{
    ViewBag.Title = "Exam ";
    Layout = "~/Views/Shared/_Layout.cshtml";
    bool isSubmitted = Model.FirstOrDefault()?.IsExamSubmitted ?? false;
    bool isExamover = Model.FirstOrDefault()?.IsExamover ?? false;
}


<style>
    /* Tab Container */
    .tab-container {
        width: 553px;
        background: #fff;
        border-radius: 8px 8px 0 0;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    /* Tab List */
    .tab-list {
        margin: 0;
        padding: 0;
        display: flex;
        list-style: none;
        background-color: #f8f8f8;
        border-radius: 8px 8px 0 0;
        border-bottom: 2px solid #ddd;
    }

    /* Tab Item */
    .tab-item {
        margin: 0;
    }

    /* Tab Link */
    .tab-link {
        display: inline-block;
        padding: 15px 40px;
        text-decoration: none;
        color: #777;
        font-weight: bold;
        text-align: center;
        transition: color 0.3s ease, background-color 0.3s ease;
        border-right: 1px solid #ddd;
        cursor: pointer;
        border-radius: 8px 8px 0 0;
    }

    /* Remove border for the last tab */
    .tab-item:last-child .tab-link {
        border-right: none;
    }

    /* Tab Hover Effect */
    .tab-link:hover {
        background-color: #e9e9e9;
        color: #333;
    }

    /* Active Tab */
    .tab-link.active {
        background-color: #e2f0f7;
        border-bottom: 2px solid #1790D2;
    }

    /* Tab Content Wrapper */
    .tab-content-wrapper {
        padding: 20px;
        background-color: #fff;
        border-radius: 0 0 8px 8px;
        box-shadow: 0 -4px 6px rgba(0, 0, 0, 0.1);
    }

    /* Tab Content */
    .tab-content {
        display: none;
        text-align: center;
        color: #888;
        font-weight: 300;
        font-size: 15px;
        opacity: 0;
        transform: translateY(15px);
        animation: fadeIn 0.5s ease 1 forwards;
    }

        /* Show Active Tab Content */
        .tab-content.active {
            display: block;
        }
</style>

<div id="tabs">

    <div class="container-fluid">
        <div class="mt-3">
            <div id="tabs-1">
                <form id="frmEntry">
                    <div class="card card-secondary">
                        <div class="alert alert-info">
                            Time Remaining: <span id="time"></span>
                        </div>
                        <div class="card-header">
                            <h3 class="card-title">Exam</h3>

                        </div>
                        <input type="hidden" id="actionType" name="actionType" />
                        @*<div class="card-body">



        </div>*@
                    <input type="hidden" id="RemainingSeconds" value="@Model.First().RemainingSeconds" />
                        @for (int i = 0; i < Model.Count; i++)
                        {
                            var question = Model[i];
                            <div class="card mb-4 shadow-sm">
                                <div class="card-header bg-primary text-white">
                                    <h5 class="mb-0">
                                        Question @(i + 1)
                                        <span class="badge bg-light text-dark float-end">@question.QuestionMark Marks</span>
                                    </h5>
                                </div>

                                <div class="card-body">
                                    <p class="question-text mb-3"><strong>@question.QuestionText</strong></p>

                                    <!-- Hidden fields for question -->

                                    <input type="hidden" name="[@i].Id" value="@question.Id" />
                                    <input type="hidden" name="[@i].ExamId" value="@question.ExamId" />
                                    <input type="hidden" name="[@i].ExamineeId" value="@question.ExamineeId" />
                                    <input type="hidden" name="[@i].QuestionText" value="@question.QuestionText" />
                                    <input type="hidden" name="[@i].QuestionType" value="@question.QuestionType" />
                                    <input type="hidden" name="[@i].QuestionMark" value="@question.QuestionMark" />

                                    <!-- OPTIONS -->
                                    @for (int j = 0; j < question.Options.Count; j++)
                                    {
                                        var option = question.Options[j];

                                        <!-- Hidden fields for options -->
                                        <input type="hidden" name="[@i].Options[@j].Id" value="@option.Id" />
                                        <input type="hidden" name="[@i].Options[@j].QuestionOption" value="@option.QuestionOption" />
                                        <input type="hidden" name="[@i].Options[@j].QuestionAnswer" value="@option.QuestionAnswer" />

                                        if (question.QuestionType.ToLower() == "singleoption")
                                        {
                                            <div class="form-check mb-2">
                                                <input class="form-check-input"
                                                       type="radio"
                                                       name="[@i].SelectedOptionIds"
                                                       value="@option.Id"
                                                       @(question.SelectedOptionIds.Contains(option.Id) ? "checked" : "") />
                                                <label class="form-check-label">@option.QuestionOption</label>
                                            </div>
                                        }
                                        else if (question.QuestionType.ToLower() == "multioption")
                                        {
                                            <div class="form-check mb-2">
                                                <input class="form-check-input"
                                                       type="checkbox"
                                                       name="[@i].SelectedOptionIds[@j]"
                                                       value="@option.Id"
                                                       @(question.SelectedOptionIds.Contains(option.Id) ? "checked" : "") />
                                                <label class="form-check-label">@option.QuestionOption</label>
                                            </div>
                                        }
                                    }

                                    <!-- Text inputs -->
                                    @if (question.QuestionType.ToLower() == "singleline")
                                    {
                                        <input type="text"
                                               class="form-control"
                                               name="[@i].UserAnswer"
                                               value="@question.UserAnswer"
                                               placeholder="Enter your answer..." />
                                    }
                                    else if (question.QuestionType.ToLower() == "multiline")
                                    {
                                        <textarea class="form-control"
                                                  name="[@i].UserAnswer"
                                                  rows="3">@question.UserAnswer</textarea>
                                    }
                                </div>
                            </div>
                        }

                    </div>


                    <div class="card" style="flex-direction: row; justify-content: space-between; align-items: center;">
                        <div class="card-header p-2">

                            @if (!isExamover)
                            {
                                if (!isSubmitted)
                                {
                                    <button type="button" class="button btnsave sslUpdate" name="actionType" value="Draft">Save (Draft)</button>
                                    <button type="button" class="button btnPost sslPost" name="actionType" value="Final">Submit</button>
                                }
                                else
                                {
                                    <span class="text-success"><strong>Exam already submitted</strong></span>
                                }
                            }
                            else
                            {
                                <span class="text-success"><strong>Exam already Over</strong></span>

                            }

                        </div>
                    </div>

                </form>
            </div>
        </div>
    </div>
</div>

@section scripts {
    <script src="~/Areas/Common/js/Services/CommonService.js"></script>
    <script src="~/Areas/Common/js/Services/CommonAjaxService.js"></script>
    <script src="~/Areas/Exam/js/Controllers/ExamsController.js"></script>

    <script>
        $(document).ready(function () {
            ExamsController.init();
        });
    </script>
}




<script>
</script>
